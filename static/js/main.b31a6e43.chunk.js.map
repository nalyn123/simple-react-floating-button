{"version":3,"sources":["arrow-yellow.png","arrow-orange.png","../../src/index.js","../../src/index-model.js","App.js","index.js"],"names":["module","exports","_ref","buttons","sections","className","buttonClassName","onClick","_useFloatingModel","_useState","useState","sizes","setSizes","_useState2","renderButtons","setButtons","ref","useRef","mainRef","useLayoutEffect","current","_ref$current","button","querySelector","style","height","offsetHeight","useEffect","init","window","addEventListener","createButtons","removeEventListener","newHeights","forEach","value","_myRef$current","_ref2","myRef","theme","top","offsetTop","bottom","getComputedStyle","push","getTheme","backgroundColor","e","scrollTop","document","documentElement","currentTop","currentBottom","allSizes","filter","size","index","rangesOverlap","newButtons","_allSizes","_ref$current2","t","newTop","Math","abs","wrap","btn","transform","rgba","match","length","Number","start1","end1","start2","end2","useFloatingModel","React","createElement","light","map","_button$style","_button$style2","key","Button","App","dark","buttons2","src","ArrowOrange","ArrowYellow","buttons3","refs","setRefs","ref1","ref2","ref3","ref4","ref5","Fragment","FloatingButton","alert","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.b31a6e43.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAWdJREFUWIXt0DFLw0AYxvHnTevQIlQEl6uD6BcpgoNI6yAITn4HdVHQzYJa8Ts4SRCkPTo4tYMfQ9c4FDcRqTSPQ1WqSUxySStI3vEuuf/vDsgmm2wAsIM87cXSxHo3CzPsIA8AwqZaoeAKwCzIa7FkW6rOy1jCWhVJuQS4AeBJiC1xtboHsTTyWVdE1tJGDONsA1L5WhQ8WCB+PL1USLapVXGscQAgSpYQZ95f0kMExgEI0LBk3TklpO6PwC3tuelkcWi/OMELqTkn8rkwaJWPBTzwOedOXt9WZbP3bBbHsl88V3vcAQAZ3UgLETXuAaSBiBP3BSRBxI0HAkwQJvFfAQAw0OW6kPthCNN4KCAKAoUp1zQeCTBEqIYQu94ddj+OqXh2BOe5qrMXdnYkwBAR+BJeVoSbxwZERcSJxwaEIeLGjQBBCJN4omFLHbla9V2t+myWDycW/obQqkh7vvAn8Wyy+TfzDjtvC0hvXCd+AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAW1JREFUWIXt1D1Lw1AUgOH3lEJrDFRacBAHUag4Z3JqEB3E0cnJ/6AudtBJFyv+BycHN+megmtHQYpOQiZbB4Moaq+DLahNm+Q27SA5kCEf975PMgSSSSYZQNl2urU6nxtX78mem1K2nQaQZmlpDdoXQB64fPPM7Zl6/WUUYdeyjMykd46wCTQhtSWPpcU7gYXuQwLOq2duxI1wLcvIml5Vgd29puA+JfDr0yuws6ZXdS3LGGUcQCCXEjj5uyBORL84gCgqAtAqFY8UUvZZf/0p6fVp58bTjWdM7wpY6b0rZ4Xa7Y50T+NGhIkDyM/LcSHCxnsAcSCixH0BwyCixvsCdBA68YGADuJYIftBCN14ICAM4uM529aNhwIANO1iBSW7Posd+P5x9e6sTgtOYy9o71AAGPgl/LYNfPPIgPCI8PHIgGBEtLgWoD8iehwgpQPI1xplUIfAe+c40IkPPa5lGQ/LsxNjDyeTzL+aL/puz/SnY6cLAAAAAElFTkSuQmCC\"","import React from 'react'\nimport { useFloatingModel } from './index-model'\n\nconst FloatingButton = ({\n  buttons,\n  sections,\n  className,\n  buttonClassName,\n  onClick\n}) => {\n  const { mainRef, ref, renderButtons } = useFloatingModel({\n    buttons,\n    sections\n  })\n\n  return (\n    <div ref={mainRef} className={`floating-button ${className || ''}`}>\n      <div ref={ref} className={`floating-button__btn-default`}>\n        <button className={`btn btn-light`} onClick={onClick}>\n          {buttons?.light}\n        </button>\n      </div>\n\n      {renderButtons.map((button, index) => (\n        <div\n          className={`floating-button__btn-${button?.theme}`}\n          key={index}\n          style={button?.style?.wrap}\n        >\n          <button\n            className={`btn btn-${button?.theme} ${buttonClassName}`}\n            style={button?.style?.btn}\n          >\n            {button?.button}\n          </button>\n        </div>\n      ))}\n    </div>\n  )\n}\n\nexport default FloatingButton\n","import React, { useLayoutEffect, useRef, useState, useEffect } from 'react'\n\nexport const useFloatingModel = ({ buttons, sections }) => {\n  const [sizes, setSizes] = useState([])\n  const [renderButtons, setButtons] = useState([])\n  const ref = useRef(null)\n  const mainRef = useRef(null)\n\n  useLayoutEffect(() => {\n    if (ref.current) {\n      const button = ref.current.querySelector('button')\n      if (button) {\n        button.style.height = ref?.current?.offsetHeight + 'px'\n      }\n    }\n  }, [ref])\n\n  useEffect(() => {\n    init()\n  }, [sections])\n\n  useEffect(() => {\n    window.addEventListener('scroll', createButtons)\n    window.addEventListener('load', createButtons)\n\n    return () => {\n      window.removeEventListener('scroll', createButtons)\n      window.removeEventListener('load', createButtons)\n    }\n  }, [sizes])\n\n  const init = () => {\n    const newHeights = []\n    sections?.forEach((value) => {\n      const { ref: myRef, theme } = value\n      const ref = myRef?.current ?? myRef\n      if (!ref) return\n\n      const top = ref?.offsetTop\n      const bottom = top + ref?.offsetHeight\n\n      const style = window.getComputedStyle(ref)\n      newHeights.push({\n        top,\n        bottom,\n        theme: theme ?? getTheme(style.backgroundColor) ?? ''\n      })\n    })\n\n    setSizes(newHeights)\n  }\n\n  const createButtons = (e) => {\n    if (!mainRef?.current) return\n    const { scrollTop } = document.documentElement\n    const button = mainRef?.current\n    const top = button.offsetTop\n\n    const height = button.offsetHeight\n    const currentTop = scrollTop + top\n    const currentBottom = currentTop + height\n\n    const allSizes = sizes.filter((size, index) =>\n      rangesOverlap(size.top, size.bottom, currentTop, currentBottom)\n    )\n\n    const newButtons = []\n    allSizes.forEach((value, index) => {\n      const t = value?.top - currentTop\n      const newTop = t < 0 ? 0 : Math.abs(t)\n      const height = allSizes[index + 1]\n        ? allSizes[index + 1]?.top - currentTop + 'px'\n        : 'auto'\n\n      newButtons.push({\n        button: buttons?.[value?.theme],\n        theme: value?.theme,\n        style: {\n          wrap: {\n            top: newTop + 'px',\n            height: height\n          },\n          btn: {\n            transform: `translateY(${newTop * -1}px)`,\n            height: ref?.current?.offsetHeight + 'px'\n          }\n        }\n      })\n    })\n\n    setButtons(newButtons)\n  }\n\n  const getTheme = (rgba) => {\n    const match = rgba.match(/\\d+\\.?\\d*/g)\n    if (!match || match.length < 3) return false\n\n    const r = Number(match[0])\n    const g = Number(match[1])\n    const b = Number(match[2])\n\n    const brightness = 0.299 * r + 0.587 * g + 0.114 * b\n\n    return brightness < 128 ? 'dark' : 'light'\n  }\n\n  const rangesOverlap = (start1, end1, start2, end2) => {\n    return start1 <= end2 && start2 <= end1\n  }\n\n  return { mainRef, ref, renderButtons }\n}\n","import React, { useRef, useEffect, useState, useMemo } from 'react'\n\nimport FloatingButton from 'simple-react-floating-button'\nimport 'simple-react-floating-button/dist/index.css'\nimport './index.css'\nimport ArrowYellow from './arrow-yellow.png'\nimport ArrowOrange from './arrow-orange.png'\n\nconst App = () => {\n  const buttons = {\n    light: <Button />,\n    dark: <Button />\n  }\n  const buttons2 = {\n    light: <img src={ArrowOrange} />,\n    dark: <img src={ArrowYellow} />\n  }\n  const buttons3 = {\n    light: <div className='basketball'></div>,\n    dark: <div className='soccer'></div>\n  }\n\n  const [refs, setRefs] = useState([])\n  const ref1 = useRef(null)\n  const ref2 = useRef(null)\n  const ref3 = useRef(null)\n  const ref4 = useRef(null)\n  const ref5 = useRef(null)\n\n  useEffect(() => {\n    setRefs([\n      {\n        ref: document.querySelector('.section-1')\n      },\n      {\n        ref: ref2\n      },\n      {\n        ref: ref3.current\n      },\n      {\n        ref: ref4.current,\n        theme: 'dark'\n      },\n      {\n        ref: ref5.current,\n        theme: 'light'\n      }\n    ])\n  }, [ref1, ref2, ref3, ref4, ref5])\n\n  return (\n    <>\n      <div ref={ref1} className='section section-1'>\n        <h1>Floating Button Animation</h1>\n        <p>(scroll to preview)</p>\n      </div>\n      <div\n        ref={ref2}\n        className='section section--dark'\n        style={{ height: '10px' }}\n      ></div>\n      <div ref={ref3} className='section' style={{ height: '10px' }}></div>\n      <div\n        ref={ref4}\n        className='section section--dark'\n        style={{ height: '200px' }}\n      ></div>\n      <div ref={ref5} className='section'></div>\n\n      <FloatingButton\n        buttons={buttons}\n        sections={refs}\n        onClick={() => alert('button 3')}\n      />\n\n      <FloatingButton\n        buttons={buttons2}\n        sections={refs}\n        className='button2'\n        onClick={() => alert('button 2')}\n      />\n\n      <FloatingButton\n        buttons={buttons3}\n        sections={refs}\n        className='button1'\n        onClick={() => alert('button 1')}\n      />\n    </>\n  )\n}\n\nconst Button = () => <div>Button</div>\n\nexport default App\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}